<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>회원 정보 페이지</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<h2>회원 정보</h2>

<!-- 회원 정보를 보여줄 곳 -->
<div id="memberInfo">
  <h3>회원 정보</h3>
  <ul>
    <!-- 여기에 회원 정보를 동적으로 추가할 것입니다. -->
  </ul>
</div>

<script>
  $(document).ready(function() {
    // 쿠키에서 토큰을 가져오는 함수
    function getCookie(name) {
      var value = "; " + document.cookie;
      var parts = value.split("; " + name + "=");
      if (parts.length === 2) return parts.pop().split(";").shift();
    }

    var token = getCookie("your_token_cookie_name"); // 여기에 쿠키의 이름을 입력하세요

    // 페이지 로드 시 토큰을 사용하여 회원 정보를 가져와서 화면에 표시
    $.ajax({
      type: 'GET',
      url: '/members/info',
      headers: {
        'Authorization': 'Bearer ' + token // 토큰을 헤더에 포함시킵니다.
      },
      success: function(response) {
        displayMemberInfo(response); // 가져온 회원 정보를 화면에 표시
      },
      error: function(xhr, status, error) {
        alert('회원 정보를 가져오는데 실패했습니다: ' + xhr.responseText);
      }
    });

    // 회원 정보를 화면에 표시하는 함수
    function displayMemberInfo(member) {
      // 회원 정보를 동적으로 추가
      var listItem = $('<li>').text('사용자명: ' + member.email + ', nickname: ' + member.nickname + ', 소개: ' + member.introduce);
      $('#memberInfo ul').append(listItem);
    }
  });
</script>
</body>
</html>
